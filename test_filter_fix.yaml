# Test filter feature discovery fix
name: test_filter_fix
mode: signal_generation

symbols: ["SPY"]

# Simple Keltner strategy with volume filter
# volume_sma_20 should be auto-discovered from the filter
strategies:
  - name: keltner_test
    type: keltner_bands
    params:
      period: 20
      multiplier: 2.0
    filter: "signal == 0 or volume > volume_sma_20 * 1.2"

# Required fields
data:
  type: file
  start_date: "2024-01-01"
  end_date: "2024-06-30"
  config:
    file_pattern: "./data/{symbol}.csv"

portfolio:
  initial_capital: 100000
  position_sizing: fixed
  size: 0.1

timeframe: "5m"
dataset: test